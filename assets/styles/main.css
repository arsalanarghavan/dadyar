/* ===== shadcn/ui Dark Theme for Streamlit ===== */

:root {
    --bg: #09090b;
    --bg-card: #18181b;
    --bg-muted: #27272a;
    --fg: #fafafa;
    --fg-muted: #a1a1aa;
    --fg-subtle: #71717a;
    --border: #27272a;
    --border-hover: #3f3f46;
    --primary: #2563eb;
    --primary-hover: #1d4ed8;
    --primary-fg: #ffffff;
    --accent: #10b981;
    --destructive: #dc2626;
    --warning: #f59e0b;
    --ring: rgba(37, 99, 235, 0.35);
    --radius: 8px;
    --radius-lg: 12px;
    --shadow-sm: 0 1px 2px rgba(0,0,0,.4);
    --transition: 150ms cubic-bezier(.4,0,.2,1);
}

@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap');

* { font-family: 'Vazirmatn', system-ui, -apple-system, sans-serif !important; }

/* Restore Material Symbols font for Streamlit icons */
.material-symbols-rounded,
.material-symbols-outlined,
.material-symbols-sharp,
.material-icons,
[data-testid="stIconMaterial"],
span[class*="material"] {
    font-family: 'Material Symbols Rounded', 'Material Symbols Outlined', 'Material Icons' !important;
}

/* ── App Shell ── */
.stApp { background: var(--bg) !important; color: var(--fg); }

header[data-testid="stHeader"] { background: transparent !important; }

.main .block-container {
    max-width: 1100px;
    padding: 2rem 2rem 4rem !important;
}

/* ── CRITICAL: undo rogue card-ification ── */
div[data-testid="stVerticalBlock"] > div,
div[data-testid="stVerticalBlock"] > div > div {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
}

/* ── Typography ── */
h1, h2, h3, h4, h5, h6 {
    color: var(--fg) !important;
    font-weight: 600 !important;
    letter-spacing: -0.01em;
}
h1 { font-size: 1.875rem !important; }
h2 { font-size: 1.5rem !important; }
h3 { font-size: 1.125rem !important; }
p, span, li { color: var(--fg); line-height: 1.7; }
hr { border: none !important; border-top: 1px solid var(--border) !important; margin: 1.25rem 0 !important; }
a { color: var(--primary) !important; }

/* ── Sidebar ── */
section[data-testid="stSidebar"] {
    background: var(--bg-card) !important;
    border-left: 1px solid var(--border) !important;
    border-right: none !important;
}
section[data-testid="stSidebar"] > div { padding: 1.25rem 1rem !important; }
section[data-testid="stSidebar"] div[data-testid="stVerticalBlock"] > div {
    background: transparent !important;
    border: none !important;
}

/* Caption in sidebar */
section[data-testid="stSidebar"] [data-testid="stCaptionContainer"] {
    color: var(--fg-subtle) !important;
}
section[data-testid="stSidebar"] [data-testid="stCaptionContainer"] p {
    color: var(--fg-subtle) !important;
    font-size: 0.75rem !important;
}

/* ── Buttons (default) ── */
.stButton > button,
button[data-testid="stBaseButton-secondary"] {
    background: var(--bg-muted) !important;
    color: var(--fg) !important;
    border: 1px solid var(--border) !important;
    border-radius: var(--radius) !important;
    padding: 0.5rem 1rem !important;
    font-weight: 500 !important;
    font-size: 0.875rem !important;
    transition: all var(--transition) !important;
    box-shadow: none !important;
}
.stButton > button:hover,
button[data-testid="stBaseButton-secondary"]:hover {
    background: var(--border-hover) !important;
    border-color: var(--border-hover) !important;
    transform: none !important;
    box-shadow: none !important;
}

/* Primary / submit */
button[data-testid="stBaseButton-primary"],
.stFormSubmitButton > button,
button[kind="primary"] {
    background: var(--primary) !important;
    color: var(--primary-fg) !important;
    border: 1px solid var(--primary) !important;
    border-radius: var(--radius) !important;
    padding: 0.625rem 1.25rem !important;
    font-weight: 600 !important;
    font-size: 0.875rem !important;
    transition: all var(--transition) !important;
    box-shadow: none !important;
}
button[data-testid="stBaseButton-primary"]:hover,
.stFormSubmitButton > button:hover,
button[kind="primary"]:hover {
    background: var(--primary-hover) !important;
    border-color: var(--primary-hover) !important;
    transform: none !important;
    box-shadow: none !important;
}

/* ── Tabs ── */
.stTabs [data-baseweb="tab-list"] {
    background: var(--bg-card) !important;
    border-radius: var(--radius) !important;
    padding: 4px !important;
    gap: 4px !important;
    border: 1px solid var(--border) !important;
}
.stTabs [data-baseweb="tab"] {
    background: transparent !important;
    color: var(--fg-muted) !important;
    border-radius: 6px !important;
    font-weight: 500 !important;
    font-size: 0.875rem !important;
    padding: 0.5rem 1rem !important;
    border: none !important;
    transition: all var(--transition) !important;
}
.stTabs [data-baseweb="tab"]:hover {
    color: var(--fg) !important;
    background: var(--bg-muted) !important;
}
.stTabs [aria-selected="true"] {
    background: var(--bg-muted) !important;
    color: var(--fg) !important;
    font-weight: 600 !important;
    box-shadow: var(--shadow-sm) !important;
}
.stTabs [data-baseweb="tab-highlight"],
.stTabs [data-baseweb="tab-border"] { display: none !important; }

/* ── Inputs ── */
.stTextInput input,
.stTextArea textarea,
.stNumberInput input {
    background: var(--bg-card) !important;
    color: var(--fg) !important;
    border: 1px solid var(--border) !important;
    border-radius: var(--radius) !important;
    padding: 0.625rem 0.75rem !important;
    font-size: 0.875rem !important;
    transition: border-color var(--transition) !important;
}
.stTextInput input:focus,
.stTextArea textarea:focus,
.stNumberInput input:focus {
    border-color: var(--primary) !important;
    box-shadow: 0 0 0 3px var(--ring) !important;
    outline: none !important;
}
.stTextInput input::placeholder,
.stTextArea textarea::placeholder { color: var(--fg-subtle) !important; }
.stTextArea textarea { min-height: 160px !important; line-height: 1.6 !important; }

/* ── Labels ── */
.stTextInput label,
.stTextArea label,
.stSelectbox label,
.stNumberInput label {
    color: var(--fg) !important;
    font-weight: 500 !important;
    font-size: 0.875rem !important;
    display: block !important;
    width: 100% !important;
}

/* ── Widget label container ── */
[data-testid="stWidgetLabel"] {
    width: 100% !important;
}
[data-testid="stWidgetLabel"] > div {
    justify-content: flex-end !important;
}

/* Selectbox */
.stSelectbox [data-baseweb="select"] > div {
    background: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
    border-radius: var(--radius) !important;
    color: var(--fg) !important;
}
/* Dropdown menu */
[data-baseweb="menu"],
[data-baseweb="popover"] > div {
    background: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
    border-radius: var(--radius) !important;
}
[data-baseweb="menu"] li { color: var(--fg) !important; }
[data-baseweb="menu"] li:hover { background: var(--bg-muted) !important; }

/* ── Form ── */
[data-testid="stForm"] {
    background: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
    border-radius: var(--radius-lg) !important;
    padding: 1.5rem !important;
}

/* ── Expanders ── */
details[data-testid="stExpander"],
.streamlit-expanderHeader {
    background: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
    border-radius: var(--radius) !important;
    margin-bottom: 0.5rem;
}
details[data-testid="stExpander"] summary {
    padding: 0.75rem 1rem !important;
    font-weight: 500 !important;
    color: var(--fg) !important;
}
details[data-testid="stExpander"] summary:hover { background: var(--bg-muted) !important; }
details[data-testid="stExpander"] > div[data-testid="stExpanderDetails"] {
    padding: 0 1rem 1rem !important;
    background: transparent !important;
    border: none !important;
}

/* ── Alerts ── */
.stAlert, div[role="alert"] {
    border-radius: var(--radius) !important;
    font-size: 0.875rem !important;
    padding: 0.75rem 1rem !important;
}

/* ── Metrics ── */
[data-testid="stMetric"] { background: transparent !important; }
[data-testid="stMetricValue"] { color: var(--fg) !important; font-size: 1.5rem !important; font-weight: 700 !important; }
[data-testid="stMetricLabel"] { color: var(--fg-muted) !important; font-size: 0.8rem !important; }

/* ── Plotly ── */
.js-plotly-plot { border-radius: var(--radius) !important; overflow: hidden !important; }

/* ── Markdown ── */
.stMarkdown code {
    background: var(--bg-muted) !important;
    color: var(--accent) !important;
    padding: 0.15rem 0.4rem !important;
    border-radius: 4px !important;
    font-size: 0.85em !important;
}
.stMarkdown pre {
    background: var(--bg-card) !important;
    border: 1px solid var(--border) !important;
    border-radius: var(--radius) !important;
    padding: 1rem !important;
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--fg-subtle); }

/* ── Misc ── */
[data-testid="column"] { padding: 0 0.375rem !important; }
.stAppDeployButton { display: none !important; }
.stSpinner > div { border-color: var(--primary) !important; }
.stProgress > div > div { background: var(--primary) !important; }
