"""
Persian language prompts for OpenAI GPT models.

This module contains all prompt templates used in the judicial decision-making
simulator. Prompts are designed for Chain-of-Thought reasoning in legal contexts.

Author: Master's Thesis Project - Mahsa Mirzaei
"""

# =================================================================
# System Prompts
# =================================================================

LEGAL_EXPERT_SYSTEM_PROMPT = """شما یک قاضی متخصص در حقوق مدنی جمهوری اسلامی ایران هستید که در زمینه پرونده‌های غصب و خلع ید تخصص دارید.

وظیفه شما تحلیل دقیق پرونده‌های حقوقی بر اساس مواد قانون مدنی ایران (به‌ویژه مواد ۳۰۸ تا ۳۲۷) و ارائه استدلال منطقی و شفاف است.

اصول کار شما:
۱. دقت در تحلیل واقعیات پرونده
۲. استناد به مواد قانونی مرتبط
۳. استدلال گام‌به‌گام (Chain of Thought)
۴. شفافیت کامل در فرآیند تصمیم‌گیری
۵. استفاده از زبان رسمی و حقوقی

همواره پاسخ‌های خود را به زبان فارسی و با ساختار منطقی ارائه دهید."""

# =================================================================
# Entity Extraction Prompt
# =================================================================

ENTITY_EXTRACTION_PROMPT = """شما یک دستیار حقوقی متخصص هستید که باید اطلاعات کلیدی از متن پرونده قضایی استخراج کنید.

متن پرونده:
{case_description}

لطفاً موارد زیر را به دقت استخراج کرده و به صورت JSON ارائه دهید:

{{
  "plaintiff": "نام خواهان",
  "defendant": "نام خوانده",
  "case_type": "نوع پرونده (غصب یا خلع ید)",
  "property_type": "نوع ملک یا مال (مثلاً: ملک مسکونی، زمین، خودرو، ...)",
  "incident_date": "تاریخ وقوع (در صورت ذکر)",
  "claims": ["ادعاهای اصلی خواهان"],
  "evidence": ["شواهد و مدارک ذکر شده"],
  "key_facts": ["واقعیات مهم پرونده"]
}}

نکات مهم:
- اگر اطلاعاتی ذکر نشده، مقدار null قرار دهید
- ادعاها و شواهد را به صورت لیست ارائه دهید
- از زبان رسمی و دقیق استفاده کنید
- فقط JSON خروجی بدهید، بدون توضیحات اضافه"""

# =================================================================
# Legal Reasoning Prompt (Chain-of-Thought)
# =================================================================

LEGAL_REASONING_PROMPT = """شما در حال تحلیل یک پرونده غصب یا خلع ید هستید. بر اساس مواد قانونی مرتبط و واقعیات پرونده، استدلال حقوقی خود را گام به گام ارائه دهید.

مواد قانونی مرتبط:
{relevant_articles}

واقعیات پرونده:
{case_facts}

لطفاً برای هر ماده قانونی، فرآیند استدلال خود را به شرح زیر ارائه دهید:

۱. **تحلیل ماده قانونی**: این ماده چه می‌گوید و چه شرایطی را مشخص می‌کند؟

۲. **تطبیق با واقعیات**: این ماده چگونه به واقعیات پرونده مرتبط است؟ آیا شرایط مندرج در ماده در این پرونده محقق شده است؟

۳. **نتیجه‌گیری حقوقی**: بر اساس این تحلیل، چه نتیجه حقوقی می‌توان گرفت؟

۴. **سطح اطمینان**: میزان اطمینان شما به کاربرد این ماده در این پرونده چقدر است؟ (عالی / خوب / متوسط)

خروجی خود را به صورت ساختاریافته و قابل پیگیری ارائه دهید تا بتوان زنجیره استدلال را در گراف نمایش داد.

فرمت پاسخ:
برای هر ماده، یک بلوک جداگانه با عنوان "تحلیل ماده X" ایجاد کنید."""

# =================================================================
# Article Applicability Analysis Prompt
# =================================================================

ARTICLE_APPLICABILITY_PROMPT = """بر اساس ماده قانونی زیر و واقعیات پرونده، تحلیل کنید که این ماده چگونه قابل اعمال است.

ماده {article_number}: {article_title}
متن ماده: {article_text}

واقعیات پرونده:
{case_facts}

لطفاً به سوالات زیر پاسخ دهید:

۱. آیا این ماده به پرونده مرتبط است؟ (بله/خیر)
۲. چرا این ماده مرتبط یا نامرتبط است؟
۳. کدام عناصر پرونده با این ماده تطابق دارند؟
۴. چه نتیجه حقوقی از اعمال این ماده حاصل می‌شود؟
۵. سطح اطمینان شما به این تحلیل چقدر است؟ (درصد)

پاسخ را به صورت ساختاریافته و مختصر ارائه دهید."""

# =================================================================
# Deduction Generation Prompt
# =================================================================

DEDUCTION_GENERATION_PROMPT = """بر اساس تحلیل‌های انجام شده از مواد قانونی، نتیجه‌گیری‌های حقوقی میانی را استخراج کنید.

تحلیل‌های انجام شده:
{analyses}

واقعیات پرونده:
{case_facts}

لطفاً نتیجه‌گیری‌های حقوقی را به صورت گام‌به‌گام ارائه دهید:

۱. بر اساس مواد تحلیل شده، چه عناصری از غصب یا خلع ید اثبات می‌شود؟
۲. چه ارتباطی بین واقعیات و الزامات قانونی وجود دارد؟
۳. چه نتایج حقوقی می‌توان استنباط کرد؟

هر نتیجه‌گیری را به صورت یک جمله واضح و مستدل بیان کنید."""

# =================================================================
# Verdict Generation Prompt
# =================================================================

VERDICT_GENERATION_PROMPT = """بر اساس زنجیره استدلال کامل، حکم نهایی پرونده را صادر کنید.

زنجیره استدلال:
{reasoning_chain}

واقعیات پرونده:
{case_facts}

اطلاعات طرفین:
خواهان: {plaintiff}
خوانده: {defendant}

حکم باید شامل بخش‌های زیر باشد:

۱. **خلاصه پرونده**
   - خلاصه‌ای از ادعای خواهان و موضوع دعوا

۲. **واقعیات اثبات شده**
   - واقعیاتی که بر اساس شواهد و مدارک اثبات شده‌اند

۳. **تحلیل حقوقی**
   - مواد قانونی قابل اعمال
   - استدلال حقوقی کلیدی

۴. **حکم**
   - قبول یا رد دعوا
   - در صورت قبول: جزئیات حکم (تخلیه، جبران خسارت، و...)
   - مستندات قانونی حکم

۵. **قابل اعتراض**
   - مهلت و نحوه اعتراض

حکم را به زبان رسمی و حقوقی فارسی تنظیم کنید."""

# =================================================================
# Confidence Scoring Prompt
# =================================================================

CONFIDENCE_SCORING_PROMPT = """بر اساس تحلیل انجام شده، سطح اطمینان به نتیجه‌گیری را ارزیابی کنید.

تحلیل:
{analysis}

معیارهای ارزیابی:
- وضوح واقعیات پرونده
- کفایت شواهد و مدارک
- صراحت مواد قانونی
- تطابق واقعیات با قانون
- عدم ابهام در تفسیر

سطح اطمینان را به صورت عدد بین ۰ تا ۱۰۰ و توجیه آن را ارائه دهید.

فرمت:
{{
  "confidence_score": <عدد بین 0 تا 100>,
  "justification": "توجیه سطح اطمینان"
}}"""

# =================================================================
# Few-Shot Examples for Better Performance
# =================================================================

FEW_SHOT_EXAMPLE_SIMPLE_GHASB = """
مثال: پرونده ساده غصب

ورودی:
"خواهان ادعا می‌کند خوانده بدون اجازه وارد ملک مسکونی او شده و در آن ساکن است."

خروجی:
{{
  "plaintiff": "نام ذکر نشده",
  "defendant": "نام ذکر نشده",
  "case_type": "غصب",
  "property_type": "ملک مسکونی",
  "incident_date": null,
  "claims": ["ساکن شدن بدون اجازه در ملک"],
  "evidence": [],
  "key_facts": ["تصرف غیرمجاز در ملک مسکونی"]
}}
"""

FEW_SHOT_EXAMPLE_KHALE_YAD = """
مثال: پرونده خلع ید

ورودی:
"خواهان مالک ملک با سند رسمی است و خوانده از سال ۱۴۰۰ بدون قرارداد در ملک سکونت دارد. خواهان تقاضای تخلیه دارد."

تحلیل:
- ماده ۳۰۸: غصب تعریف می‌شود - تصرف غیرمجاز محقق است
- حکم: محکومیت خوانده به تخلیه ملک
- سطح اطمینان: عالی (وجود سند رسمی و عدم قرارداد)
"""
